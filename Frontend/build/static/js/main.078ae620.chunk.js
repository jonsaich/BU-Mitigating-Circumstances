(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){"use strict";a.r(t),a.d(t,"getFromAPI",function(){return l}),a.d(t,"putToAPI",function(){return i}),a.d(t,"postToAPI",function(){return c});var n=a(25),r=a(17),s=a.n(r);function l(e,t){fetch(s.a.apiUrl+e,{credentials:"include",mode:"cors"}).then(function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}).then(function(e){console.log(e),t(e,null)}).catch(function(e){alert("We have a problem getting the response from the API ERROR: "+e),t(null,e)})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n={method:"PUT",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};return fetch(s.a.apiUrl+e,n).then(function(e){return e.json()}).then(function(e){a(e),console.log(e)}).catch(function(e){alert("We have a problem getting the response from the API. ERROR: "+e)})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l={method:"POST",mode:"cors",credentials:"include",body:1==a?t:JSON.stringify(t)},i={method:"POST",mode:"cors",headers:Object(n.a)({"Content-Type":1==a?void 0:"application/json"},"Content-Type",1==a?void 0:"application/json"),credentials:"include",body:1==a?t:JSON.stringify(t)};return fetch(s.a.apiUrl+e,1==a?l:i).then(function(e){return e.json()}).then(function(e){r(e),console.log(e)}).catch(function(e){alert("We have a problem getting the response from the API. ERROR: "+e)})}},17:function(e,t){var a={apiUrl:"https://api-dot-bu-mitigating-circumstances.appspot.com",thisUrl:"https://bu-mitigating-circumstances.appspot.com"};e.exports=a},28:function(e,t,a){e.exports=a(43)},33:function(e,t,a){},36:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(16),l=a.n(s),i=(a(33),a(5)),c=a(6),o=a(9),u=a(7),m=a(8),p=a(4),d=a(2),h=(a(24),a(36),a(45)),g=a(46),b=a(10),f=a(17),O=a.n(f),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",btnDisabled:!1},a.handleLogin=a.handleLogin.bind(Object(p.a)(Object(p.a)(a))),a.handleFacebookLogin=a.handleFacebookLogin.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.state[e.target.name]=e.target.value,this.forceUpdate()}},{key:"handleLogin",value:function(){var e=this;0==this.state.btnDisabled&&b.postToAPI("/user/login/local",{username:this.state.email,password:this.state.password},null,function(t,a){e.state.btnDisabled=!1,e.forceUpdate(),t.success?(e.props.updateUser(t.success.user),e.props.updateAlert({message:"Sucessfuly logged in, welcome back",visible:!0,color:"success"})):(e.props.updateUser(t),e.props.updateAlert({message:t.error.message,visible:!0,color:"danger"}))}),this.state.btnDisabled=!0,this.forceUpdate()}},{key:"handleFacebookLogin",value:function(){window.location.href=O.a.apiUrl+"/user/login/facebook?returnUrl="+O.a.thisUrl}},{key:"render",value:function(){return r.a.createElement(d.j,null,r.a.createElement(d.k,null,r.a.createElement(d.n,{for:"exampleEmail"},"Email"),r.a.createElement(d.m,{onChange:this.handleInputChange.bind(this),value:this.state.email,type:"email",name:"email",id:"email",placeholder:"your email address"})),r.a.createElement(d.k,null,r.a.createElement(d.n,{for:"examplePassword"},"Password"),r.a.createElement(d.m,{onChange:this.handleInputChange.bind(this),value:this.state.password,type:"password",name:"password",id:"password",placeholder:"your password"})),r.a.createElement(d.w,null,r.a.createElement("img",{style:{width:"400px",height:55,margin:"0 auto",cursor:"pointer"},onClick:this.handleFacebookLogin,src:"https://pngimage.net/wp-content/uploads/2018/06/login-with-facebook-button-png-transparent-4.png"})),r.a.createElement(d.c,{disabled:this.state.btnDisabled,onClick:this.handleLogin},this.state.btnDisabled?"Please wait...":"Login"))}}]),t}(r.a.Component),j=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("div",{className:"border-bottom mb-3 mt-2"},r.a.createElement("h2",null,"Login")))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement(E,{updateUser:this.props.updateUser,updateAlert:this.props.updateAlert}))))}}]),t}(r.a.Component),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={modal:!1},a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){this.props.comp;return r.a.createElement("div",null,r.a.createElement(d.o,{size:this.props.size,isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement(d.r,{toggle:this.toggle},this.props.modalTitle),r.a.createElement(d.p,null,this.props.comp),r.a.createElement(d.q,null,r.a.createElement(d.c,{color:"secondary",onClick:this.toggle},"Close"))))}}]),t}(r.a.Component),C=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.state={status:"",updateMessage:"",id:""},a.handleChangeStatus=a.handleChangeStatus.bind(Object(p.a)(Object(p.a)(a))),a.handleChangeMessage=a.handleChangeMessage.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(){var e=this;b.postToAPI("/mitigating-circumstances/update",this.state,null,function(t){t.success?(e.props.getMitigatingCircumstancesFromAPI(),e.props.modalSettings.toggle(),e.props.updateAlert({message:t.success.message,visible:!0,color:"success"})):(e.props.modalSettings.toggle(),e.props.updateAlert({message:t.error.message,visible:!0,color:"danger"}))})}},{key:"handleChangeStatus",value:function(e){this.setState({status:e.target.value})}},{key:"handleChangeMessage",value:function(e){this.setState({updateMessage:e.target.value})}},{key:"componentDidMount",value:function(){this.setState({status:this.props.data.status[this.props.data.status.length-1].name,id:this.props.data.id})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(d.k,null,r.a.createElement(d.n,{for:"exampleSelect"},"Update status"),r.a.createElement(d.m,{type:"select",name:"select",onChange:this.handleChangeStatus,id:"exampleSelect"},r.a.createElement("option",{selected:"APPROVE"==this.state.status},"APPROVE"),r.a.createElement("option",{selected:"PENDING"==this.state.status},"PENDING"),r.a.createElement("option",{selected:"REJECTED"==this.state.status},"REJECTED"))),r.a.createElement(d.k,null,r.a.createElement(d.n,{for:"exampleText"},"Leave a message"),r.a.createElement(d.m,{onChange:this.handleChangeMessage,type:"textarea",name:"text",id:"exampleText"})),r.a.createElement(d.c,{onClick:function(t){return e.handleSubmit(t)},color:"primary"},"Update status")," ")}}]),t}(n.Component),y=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.state={},console.log("yo"),console.log(a.props),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,{getMitigatingCircumstancesFromAPI:this.props.getMitigatingCircumstancesFromAPI,updateAlert:this.props.updateAlert,modalSettings:this.props.modalSettings,data:this.props.data}))}}]),t}(n.Component),k=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.state={},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(){console.log(this.props.data);var e=new FormData;this.props.data.file&&e.append("file",this.props.data.file,this.props.data.file.name),e.append("data",JSON.stringify(this.props.data)),b.postToAPI("/mitigating-circumstances",e,!0,function(){})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"yo"),r.a.createElement(d.c,{onClick:function(t){return e.handleSubmit(t)}},"Submit"))}}]),t}(n.Component),A=(n.Component,n.Component,function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h1",null,"Communication"),r.a.createElement(d.k,null,r.a.createElement(d.n,{for:"exampleText"},"Leave a message"),r.a.createElement(d.m,{type:"textarea",name:"text",id:"exampleText"})))}}]),t}(n.Component)),S=(n.Component,a(15)),w=a.n(S),M=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},this.props.status.name),r.a.createElement("td",null,this.props.status.message),r.a.createElement("td",null,r.a.createElement(w.a,{format:"DD-MM-YYYY HH:mm"},this.props.status.lastUpdated)))}}]),t}(n.Component),U=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.status.map(function(e){return r.a.createElement(M,{status:e})});return r.a.createElement(d.x,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Message"),r.a.createElement("th",null,"Updated"))),r.a.createElement("tbody",null,e))}}]),t}(n.Component),P=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log(this.props.files);var e=this.props.files.map(function(e){return r.a.createElement(I,{file:e})});return r.a.createElement(d.x,{dark:!0},r.a.createElement("thead",null,r.a.createElement(D,null)),r.a.createElement("tbody",null,e))}}]),t}(n.Component),D=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",null,"File"),r.a.createElement("th",null,"View"))}}]),t}(n.Component),I=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.file.fileName),r.a.createElement("td",null,this.props.file.file))}}]),t}(n.Component),F=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(P,{files:this.props.files})}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={form:{personallyAffected:"",circumstanceDetails:"",natureOfCircum:"",file:void 0},btnDisabled:!1},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.formData&&this.setState({form:this.props.formData,readOnly:!0})}},{key:"handleChange",value:function(e){var t;"radio"==e.target.type?(console.log(e.target.getAttribute("theval")),t=e.target.getAttribute("theval")):t="file"==e.target.type?e.target.files[0]:e.target.value,this.state.form[e.target.name]=t,this.forceUpdate()}},{key:"handleSubmit",value:function(){var e=this,t=new FormData;void 0!=this.state.form.file&&t.append("file",this.state.form.file,this.state.form.file.name),t.append("data",JSON.stringify(this.state.form)),0==this.state.btnDisabled&&(b.postToAPI("/mitigating-circumstances",t,!0,function(t){e.state.btnDisabled=!1,e.forceUpdate(),t.success?(e.props.getMitigatingCircumstancesFromAPI(),e.props.modalSettings.toggle(),e.props.updateAlert({message:t.success.message,visible:!0,color:"success"})):(e.props.modalSettings.toggle(),e.props.updateAlert({message:t.error.message,visible:!0,color:"danger"}))}),this.state.btnDisabled=!0,this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this,a=this.state.readOnly?"":r.a.createElement(d.c,{disabled:this.state.btnDisabled,onClick:function(t){return e.handleSubmit(t)}},this.state.btnDisabled?"Please wait...":"Submit");return r.a.createElement(d.j,null,r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("h3",null,"Exceptional Circumstances Details"),r.a.createElement("p",null,"For illness of up to 5 calendar days you can use the Self-Certification form provided to you to evidence your illness."))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("p",null,"Nature of circumstances (please tick)"),r.a.createElement(d.k,{check:!0},r.a.createElement(d.n,{check:!0},r.a.createElement(d.m,{disabled:this.state.readOnly,theval:"Illness",checked:"Illness"==this.state.form.natureOfCircum,onChange:this.handleChange.bind(this),type:"radio",value:"Illness",name:"natureOfCircum"})," ","Illness")),r.a.createElement(d.k,{check:!0},r.a.createElement(d.n,{check:!0},r.a.createElement(d.m,{disabled:this.state.readOnly,theval:"Family Illness",checked:"Family Illness"==this.state.form.natureOfCircum,onChange:this.handleChange.bind(this),type:"radio",name:"natureOfCircum"})," ","Family Illness")),r.a.createElement(d.k,{check:!0},r.a.createElement(d.n,{check:!0},r.a.createElement(d.m,{disabled:this.state.readOnly,theval:"Pregnancy related illness",checked:"Pregnancy related illness"==this.state.form.natureOfCircum,onChange:this.handleChange.bind(this),type:"radio",name:"natureOfCircum"})," ","Pregnancy related illness")),r.a.createElement(d.k,{check:!0},r.a.createElement(d.n,{check:!0},r.a.createElement(d.m,{disabled:this.state.readOnly,theval:"Bereavement",checked:"Bereavement"==this.state.form.natureOfCircum,onChange:this.handleChange.bind(this),type:"radio",name:"natureOfCircum"})," ","Bereavement")),r.a.createElement(d.k,{check:!0},r.a.createElement(d.n,{check:!0},r.a.createElement(d.m,{disabled:this.state.readOnly,theval:"Unforeseen travel disruption",checked:"Unforeseen travel disruption"==this.state.form.natureOfCircum,onChange:this.handleChange.bind(this),type:"radio",name:"natureOfCircum"})," ","Unforeseen travel disruption")),r.a.createElement(d.k,{check:!0},r.a.createElement(d.n,{check:!0},r.a.createElement(d.m,{disabled:this.state.readOnly,theval:"Acute Personal difficulties",checked:"Acute Personal difficulties"==this.state.form.natureOfCircum,onChange:this.handleChange.bind(this),type:"radio",name:"natureOfCircum"})," ","Acute Personal difficulties")))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement(d.k,{style:{marginTop:"10px"}},r.a.createElement(d.n,{for:"impact"},"Please provide as much details as possible regarding your circumstance"),r.a.createElement(d.m,{readOnly:this.state.readOnly,onChange:this.handleChange.bind(this),value:this.state.form.circumstanceDetails,type:"textarea",name:"circumstanceDetails",id:"circumstanceDetails"})))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement(d.k,null,r.a.createElement(d.n,{for:"exampleFile"},"File"),r.a.createElement(d.m,{disabled:this.state.readOnly,onChange:this.handleChange.bind(this),type:"file",name:"file",id:"exampleFile"}),r.a.createElement(d.l,{color:"muted"},"Please only max 5mb")),function(){if(console.log("here"),console.log(t.state.form),t.state.form.files&&0!=t.state.form.files.length)return r.a.createElement(F,{files:t.state.form.files})}())),a)}}]),t}(r.a.Component),x=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return"tutor"==this.props.user.role&&(console.log("yo"),console.log(this.props),e=r.a.createElement(d.d,null,r.a.createElement(y,{getMitigatingCircumstancesFromAPI:this.props.getMitigatingCircumstancesFromAPI,updateAlert:this.props.updateAlert,modalSettings:this.props.modalSettings,data:this.props.formData}))),r.a.createElement("div",{style:{borderRadius:"25px",border:"2px solid #000",margin:"5px",padding:"5px"}},r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("h3",null,"Request Updates"))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement(U,{status:this.props.formData.status})),e))}}]),t}(r.a.Component),L=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,{modalSettings:this.props.modalSettings,getMitigatingCircumstancesFromAPI:this.props.getMitigatingCircumstancesFromAPI,updateAlert:this.props.updateAlert,formData:this.props.formData,user:this.props.user}),function(e){if(void 0!=e.props.formData)return r.a.createElement(x,{getMitigatingCircumstancesFromAPI:e.props.getMitigatingCircumstancesFromAPI,modalSettings:e.props.modalSettings,updateAlert:e.props.updateAlert,formData:e.props.formData,user:e.props.user})}(this))}}]),t}(r.a.Component),T=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.mitCircums.map(function(t){return r.a.createElement(Y,{user:e.props.user,modalSettings:e.props.modalSettings,data:t})});return r.a.createElement(d.x,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:this.props.redirectTo},"Nature of circumstance"),r.a.createElement("th",null,"Submit date"),r.a.createElement("th",null,"Last updated"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleViewClick=a.handleViewClick.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleViewClick",value:function(){this.props.modalSettings.changeContent(r.a.createElement(L,{modalSettings:this.props.modalSettings,user:this.props.user,formData:this.props.data})),this.props.modalSettings.toggle()}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.data.natureOfCircum),r.a.createElement("td",null,r.a.createElement(w.a,{format:"DD-MM-YYYY HH:mm"},this.props.data.status[0].lastUpdated)),r.a.createElement("td",null,r.a.createElement(w.a,{format:"DD-MM-YYYY HH:mm"},this.props.data.status[this.props.data.status.length-1].lastUpdated)),r.a.createElement("td",null,r.a.createElement(d.b,{size:"sm",color:"warning"},this.props.data.status[this.props.data.status.length-1].name)," "),r.a.createElement("td",null,r.a.createElement(d.c,{onClick:this.handleViewClick,color:"primary"},"View")," "))}}]),t}(n.Component),R=T,V=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.state={mitCircums:[]},a.openNewMitigatingCircumstanceModal=a.openNewMitigatingCircumstanceModal.bind(Object(p.a)(Object(p.a)(a))),a.getMitigatingCircumstancesFromAPI=a.getMitigatingCircumstancesFromAPI.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getMitigatingCircumstancesFromAPI",value:function(){var e=this;b.getFromAPI("/mitigating-circumstances",function(t){e.setState({mitCircums:t})})}},{key:"componentDidMount",value:function(){this.getMitigatingCircumstancesFromAPI()}},{key:"openNewMitigatingCircumstanceModal",value:function(){this.props.modalSettings.changeContent(r.a.createElement(L,{getMitigatingCircumstancesFromAPI:this.getMitigatingCircumstancesFromAPI,updateAlert:this.props.updateAlert,modalSettings:this.props.modalSettings,user:this.props.user})),this.props.modalSettings.toggle()}},{key:"render",value:function(){var e;return e=0==this.state.mitCircums.length?r.a.createElement("h1",null,"Nothing to show!"):r.a.createElement(R,{user:this.props.user,modalSettings:this.props.modalSettings,mitCircums:this.state.mitCircums}),r.a.createElement("div",null,r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("div",{className:"border-bottom mb-3 mt-2"},r.a.createElement("h2",null,"Mitigating Circumstances")),r.a.createElement("p",null,"Below are your mitigating circumstances submitted to date. ",r.a.createElement(d.c,{onClick:this.openNewMitigatingCircumstanceModal,color:"success",size:"sm"},"Submit a new request")," "))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,e)))}}]),t}(n.Component),H=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.mitCircums.map(function(t){return r.a.createElement(J,{getMitigatingCircumstancesFromAPI:e.props.getMitigatingCircumstancesFromAPI,updateAlert:e.props.updateAlert,user:e.props.user,modalSettings:e.props.modalSettings,data:t})});return r.a.createElement(d.x,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Nature of circumstance"),r.a.createElement("th",null,"Submit date"),r.a.createElement("th",null,"Last updated"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,t))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleViewClick=a.handleViewClick.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleViewClick",value:function(){this.props.modalSettings.changeContent(r.a.createElement(L,{getMitigatingCircumstancesFromAPI:this.props.getMitigatingCircumstancesFromAPI,updateAlert:this.props.updateAlert,modalSettings:this.props.modalSettings,user:this.props.user,formData:this.props.data})),this.props.modalSettings.toggle()}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},this.props.data.student.firstName," ",this.props.data.student.lastName),r.a.createElement("td",null,this.props.data.natureOfCircum),r.a.createElement("td",null,r.a.createElement(w.a,{format:"DD-MM-YYYY HH:mm"},this.props.data.status[0].lastUpdated)),r.a.createElement("td",null,r.a.createElement(w.a,{format:"DD-MM-YYYY HH:mm"},this.props.data.status[this.props.data.status.length-1].lastUpdated)),r.a.createElement("td",null,r.a.createElement(d.b,{size:"sm",color:"warning"},this.props.data.status[this.props.data.status.length-1].name)," "),r.a.createElement("td",null,r.a.createElement(d.c,{onClick:this.handleViewClick,color:"primary"},"View")," "),r.a.createElement("td",null))}}]),t}(n.Component),z=H,B=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.state={mitCircums:[],modalContent:r.a.createElement(L,null)},a.getMitigatingCircumstancesFromAPI=a.getMitigatingCircumstancesFromAPI.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getMitigatingCircumstancesFromAPI()}},{key:"getMitigatingCircumstancesFromAPI",value:function(){var e=this;b.getFromAPI("/mitigating-circumstances",function(t){e.setState({mitCircums:t}),console.log(t)})}},{key:"render",value:function(){var e;return e=0==this.state.mitCircums.length?r.a.createElement("h3",null,"Your students don't appear to have submitted any mitigating circumstance requests. "):r.a.createElement(z,{getMitigatingCircumstancesFromAPI:this.getMitigatingCircumstancesFromAPI,updateAlert:this.props.updateAlert,user:this.props.user,modalSettings:this.props.modalSettings,mitCircums:this.state.mitCircums}),r.a.createElement("div",null,r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("div",{className:"border-bottom mb-3 mt-2"},r.a.createElement("h2",null,"Mitigating Circumstances")),r.a.createElement("p",null,"Listed below are your students submitted mitigating circumstance requests."))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,e)))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e)),console.log("hello"),console.log(a.props),a.state={form:{email:a.props.user.email,twitterId:a.props.user.twitterId,mobileNumber:a.props.user.mobileNumber},btnDisabled:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;0==this.state.btnDisabled&&b.putToAPI("/user/",this.state.form,function(e){t.state.btnDisabled=!1,t.forceUpdate(),e.success?(t.props.updateAlert({message:e.success.message,visible:!0,color:"success"}),b.getFromAPI("",function(e,a){e&&e.success&&t.props.updateUser(e.success)})):t.props.updateAlert({message:e.error.message,visible:!0,color:"danger"})}),this.state.btnDisabled=!0,this.forceUpdate()}},{key:"handleChange",value:function(e){var t;"radio"==e.target.type?(console.log(e.target.getAttribute("theval")),t=e.target.getAttribute("theval")):t="file"==e.target.type?e.target.files[0]:e.target.value,this.state.form[e.target.name]=t,this.forceUpdate()}},{key:"render",value:function(){var e=this;return r.a.createElement(d.j,null,r.a.createElement(d.k,{row:!0},r.a.createElement(d.n,{for:"exampleEmail",sm:2},"Email"),r.a.createElement(d.d,{sm:10},r.a.createElement(d.m,{disabled:!0,onChange:this.handleChange.bind(this),value:this.state.form.email,type:"email",name:"email",id:"email",placeholder:"email"}))),r.a.createElement(d.k,{row:!0},r.a.createElement(d.n,{for:"exampleEmail",sm:2},"Twitter ID"),r.a.createElement(d.d,{sm:10},r.a.createElement(d.m,{onChange:this.handleChange.bind(this),value:this.state.form.twitterId,name:"twitterId",id:"twitterId",placeholder:"this is not your @username - to submit via twitter"}))),r.a.createElement(d.k,{row:!0},r.a.createElement(d.n,{for:"exampleEmail",sm:2},"Mobile number"),r.a.createElement(d.d,{sm:10},r.a.createElement(d.m,{onChange:this.handleChange.bind(this),value:this.state.form.mobileNumber,name:"mobileNumber",id:"mobileNumber",placeholder:"please user your country code i.e. +44744.."}))),r.a.createElement(d.k,{check:!0,row:!0},r.a.createElement(d.d,{sm:{size:10,offset:2}},r.a.createElement(d.c,{disabled:this.state.btnDisabled,onClick:function(t){return e.handleSubmit(t)}},this.state.btnDisabled?"Please wait...":"Submit"))))}}]),t}(n.Component),W=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement("div",{className:"border-bottom mb-3 mt-2"},r.a.createElement("h2",null,"Update details")))),r.a.createElement(d.w,null,r.a.createElement(d.d,null,r.a.createElement(q,{updateUser:this.props.updateUser,updateAlert:this.props.updateAlert,user:this.props.user}))))}}]),t}(n.Component),G=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return 0==Object.keys(this.props.user).length?r.a.createElement(j,{updateAlert:e.props.updateAlert,updateUser:e.props.updateUser}):r.a.createElement("div",null,r.a.createElement(g.a,{path:"/",exact:!0,render:function(){return"student"==e.props.user.role?r.a.createElement(V,{modalSettings:e.props.modalSettings,updateAlert:e.props.updateAlert,user:e.props.user}):"tutor"==e.props.user.role?r.a.createElement(B,{modalSettings:e.props.modalSettings,updateAlert:e.props.updateAlert,user:e.props.user}):r.a.createElement(j,{updateAlert:e.props.updateAlert,updateUser:e.props.updateUser})}}),r.a.createElement(g.a,{path:"/users/",render:function(){return r.a.createElement("h3",null,"Please select a topic.")}}),r.a.createElement(g.a,{path:"/update-account",render:function(){return r.a.createElement(W,{updateUser:e.props.updateUser,updateAlert:e.props.updateAlert,user:e.props.user})}}))}}]),t}(n.Component),$=a(44),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a.state={isOpen:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement("span",{style:{width:"100%"}},r.a.createElement(d.v,{onClick:this.toggle}),r.a.createElement(d.e,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(d.s,{className:"ml-auto",navbar:!0},r.a.createElement(d.t,null,r.a.createElement($.a,{className:"nav-link",to:"/"},"Login")))))}}]),t}(r.a.Component),Q=a(10),X=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a.state={isOpen:!1},a.handleLogout=a.handleLogout.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleLogout",value:function(){var e=this;Q.getFromAPI("/user/logout",function(t){console.log(t),e.props.updateUser({})})}},{key:"render",value:function(){return r.a.createElement("span",{style:{width:"100%"}},r.a.createElement(d.v,{onClick:this.toggle}),r.a.createElement(d.e,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(d.s,{className:"ml-auto",navbar:!0},r.a.createElement(d.y,{nav:!0,inNavbar:!0},r.a.createElement(d.i,{nav:!0,caret:!0},this.props.user.firstName," ",this.props.user.lastName),r.a.createElement(d.h,{right:!0},r.a.createElement(d.g,null,r.a.createElement($.a,{className:"nav-link",to:"/update-account"},"Update details")),r.a.createElement(d.g,{divider:!0}),r.a.createElement(d.g,{onClick:this.handleLogout},"Logout"))))))}}]),t}(r.a.Component),Z=a(10),_=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));Object(p.a)(Object(p.a)(a));return a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a.state={isOpen:!1},a.handleLogout=a.handleLogout.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleLogout",value:function(){var e=this;Z.getFromAPI("/user/logout",function(t){console.log(t),e.props.updateUser({})})}},{key:"render",value:function(){return r.a.createElement("span",{style:{width:"100%"}},r.a.createElement(d.v,{onClick:this.toggle}),r.a.createElement(d.e,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(d.s,{className:"ml-auto",navbar:!0},r.a.createElement(d.y,{nav:!0,inNavbar:!0},r.a.createElement(d.i,{nav:!0,caret:!0},this.props.user.firstName," ",this.props.user.lastName),r.a.createElement(d.h,{right:!0},r.a.createElement(d.g,null,r.a.createElement($.a,{className:"nav-link",to:"/update-account"},"Update details")),r.a.createElement(d.g,{divider:!0}),r.a.createElement(d.g,{onClick:this.handleLogout},"Logout"))))))}}]),t}(r.a.Component),ee=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"tutor"==this.props.user.role?r.a.createElement(_,{updateUser:this.props.updateUser,user:this.props.user}):"student"==this.props.user.role?r.a.createElement(X,{updateUser:this.props.updateUser,user:this.props.user}):r.a.createElement(K,null)}}]),t}(r.a.Component),te=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.u,{color:"light",light:!0,expand:"md"},r.a.createElement($.a,{className:"navbar-brand",to:"/"},"BU Mitigating Circumstances"),r.a.createElement(ee,{user:this.props.user,updateUser:this.props.updateUser})))}}]),t}(r.a.Component),ae=(r.a.Component,function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={alert:{}},a.onDismiss=a.onDismiss.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onDismiss",value:function(){this.state.alert.visible=!1,this.forceUpdate()}},{key:"componentDidMount",value:function(){this.setState({alert:this.props.settings}),console.log(this.props.settings)}},{key:"componentDidUpdate",value:function(e){e!=this.props&&this.setState({alert:this.props.settings})}},{key:"render",value:function(){return r.a.createElement(d.a,{color:this.state.alert.color,isOpen:this.state.alert.visible,toggle:this.onDismiss},this.state.alert.message)}}]),t}(r.a.Component)),ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={alertSettings:{message:"",visible:!1}},a.updateAlert=a.updateAlert.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"updateAlert",value:function(e){this.setState({alertSettings:e})}},{key:"render",value:function(){return r.a.createElement(d.f,null,r.a.createElement(ae,{settings:this.state.alertSettings}),r.a.createElement(G,{modalSettings:this.props.modalSettings,updateAlert:this.updateAlert,user:this.props.user,updateUser:this.props.updateUser}))}}]),t}(n.Component),re=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={user:{}};var n=Object(p.a)(Object(p.a)(a));return b.getFromAPI("",function(e,t){e&&e.success&&n.setState({user:e.success,modalContent:""})}),a.updateUser=a.updateUser.bind(Object(p.a)(Object(p.a)(a))),a.changeModalContent=a.changeModalContent.bind(Object(p.a)(Object(p.a)(a))),a.toggleModal=a.toggleModal.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"updateUser",value:function(e){this.setState({user:e})}},{key:"toggleModal",value:function(){this.child.toggle()}},{key:"changeModalContent",value:function(e){this.setState({modalContent:e})}},{key:"render",value:function(){var e=this,t={toggle:this.toggleModal,changeContent:this.changeModalContent};return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(te,{user:this.state.user,updateUser:this.updateUser}),r.a.createElement(ne,{modalSettings:t,user:this.state.user,updateUser:this.updateUser}))),r.a.createElement(v,{modalTitle:"New mitigating circumstance request",size:"lg",comp:this.state.modalContent,onRef:function(t){return e.child=t}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.078ae620.chunk.js.map